{
  "entities": {
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer using the PetSpa services.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the customer."
        },
        "name": {
          "type": "string",
          "description": "The customer's full name."
        },
        "contactNumber": {
          "type": "string",
          "description": "The customer's contact phone number."
        }
      },
      "required": [
        "id",
        "name",
        "contactNumber"
      ]
    },
    "Pet": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Pet",
      "type": "object",
      "description": "Represents a pet that receives services at the PetSpa.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the pet."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to Customer. (Relationship: Customer 1:N Pet)"
        },
        "name": {
          "type": "string",
          "description": "The pet's name."
        },
        "breed": {
          "type": "string",
          "description": "The pet's breed."
        },
        "size": {
          "type": "string",
          "description": "The pet's size (e.g., small, medium, large)."
        },
        "vaccinationStatus": {
          "type": "string",
          "description": "The pet's vaccination status."
        }
      },
      "required": [
        "id",
        "customerId",
        "name",
        "breed",
        "size",
        "vaccinationStatus"
      ]
    },
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a scheduled appointment at the PetSpa.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the appointment."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who created the appointment."
        },
        "clientName": {
            "type": "string"
        },
        "petName": {
            "type": "string"
        },
        "startTime": {
          "type": "string",
          "description": "The start time of the appointment. ISO8601 datetime format.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of the appointment. ISO8601 datetime format.",
          "format": "date-time"
        },
        "bathType": {
          "type": "string",
          "description": "The type of bath service (e.g., regular, medicated)."
        },
        "additionalServices": {
          "type": "array",
          "description": "List of additional services selected for the appointment.",
          "items": {
            "type": "string"
          }
        },
        "totalPrice": {
          "type": "number",
          "description": "The total price for the appointment."
        },
        "blocked": {
          "type": "boolean",
          "description": "Specifies if this appointment time is blocked by an admin."
        }
      },
      "required": [
        "id",
        "userId",
        "clientName",
        "petName",
        "startTime",
        "endTime",
        "bathType",
        "totalPrice",
        "blocked"
      ]
    },
     "RecurringBlock": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Recurring Block",
      "type": "object",
      "description": "Represents a recurring weekly blocked time slot.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the recurring block."
        },
        "dayOfWeek": {
          "type": "string",
          "description": "The day of the week for the block (e.g., '1' for Monday)."
        },
        "time": {
          "type": "string",
          "description": "The time of the block (e.g., '14:30')."
        },
        "petName": {
          "type": "string",
          "description": "The name of the pet for this recurring block."
        },
        "label": {
          "type": "string",
          "description": "A label for the block, e.g., 'Clubinho'."
        },
        "frequency": {
          "type": "string",
          "enum": ["weekly", "bi-weekly"],
          "description": "The frequency of the recurrence."
        },
        "cycleStartDate": {
            "type": "string",
            "format": "date-time",
            "description": "The start date of a bi-weekly cycle."
        },
        "startWeekParity": {
            "type": "number",
            "description": "The parity of the start week (0 for even, 1 for odd)."
        },
        "startBathNumber": {
            "type": "number",
            "description": "The starting number for the bath cycle."
        }
      },
      "required": [
        "id",
        "dayOfWeek",
        "time",
        "petName",
        "label",
        "frequency"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ],
    "claims": {
        "admin": {
            "type": "boolean"
        }
    }
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
            "description": "Stores basic user profile information.",
            "schema": {
                "type": "object",
                "properties": {
                    "displayName": { "type": "string" },
                    "email": { "type": "string", "format": "email" }
                }
            }
        }
      },
      {
        "path": "/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/backend/entities/Appointment"
          },
          "description": "Stores all appointment data. Readable by all signed-in users for availability checks, but only writable by the creating user or an admin.",
          "params": [
            {
              "name": "appointmentId",
              "description": "The ID of the appointment."
            }
          ]
        }
      },
      {
        "path": "/recurringBlocks/{blockId}",
        "definition": {
          "entityName": "RecurringBlock",
          "schema": {
            "$ref": "#/backend/entities/RecurringBlock"
          },
          "description": "Stores recurring weekly time blocks for events like 'Clubinho'. Read by all, writable only by admin.",
          "params": [
            {
              "name": "blockId",
              "description": "The ID of the recurring block."
            }
          ]
        }
      }
    ]
  }
}
